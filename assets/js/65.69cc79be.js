(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{564:function(e,s,t){},628:function(e,s,t){"use strict";t(564)},686:function(e,s,t){"use strict";t.r(s);var a={data:()=>({loading:!1,responseData:null,currentType:"none",requestCount:0,cacheHitCount:0,cacheTypes:[{label:"无缓存",value:"none"},{label:"临时缓存",value:"temporary"},{label:"内存缓存",value:"memory"},{label:"会话缓存",value:"session"},{label:"持久缓存",value:"persistent"}]}),methods:{setCacheType(e){this.currentType=e,this.responseData=null,this.requestCount=0,this.cacheHitCount=0},async loadData(){this.loading=!0,this.requestCount++;try{const e=await this.$request.get({url:"/api/users",data:{id:1}},{enableCache:"none"!==this.currentType,cacheType:this.currentType});e.__CACHE_HIT__&&this.cacheHitCount++,this.responseData=e,this.$message.success(e.__CACHE_HIT__?"从缓存获取成功":"从服务器获取成功")}catch(e){this.$message.error("请求失败"),console.error("请求失败:",e)}this.loading=!1},clearCache(){this.$request.clearCache(),this.responseData=null,this.$message.success("缓存已清除")},formatTime(e){if(!e)return"";return new Date(e).toLocaleTimeString()}}},n=(t(628),t(3)),i=Object(n.a)(a,(function(){var e=this,s=e._self._c;return s("div",{staticClass:"example-request-cache"},[s("div",{staticClass:"button-group"},[s("el-button-group",e._l(e.cacheTypes,(function(t){return s("el-button",{key:t.value,attrs:{type:e.currentType===t.value?"primary":""},on:{click:function(s){return e.setCacheType(t.value)}}},[e._v("\n        "+e._s(t.label)+"\n      ")])})),1),e._v(" "),s("el-button",{attrs:{type:"warning"},on:{click:e.clearCache}},[e._v("\n      清除缓存\n    ")])],1),e._v(" "),s("div",{staticClass:"operation-group"},[s("el-button",{attrs:{type:"success",loading:e.loading},on:{click:e.loadData}},[e._v("\n      发起请求\n    ")]),e._v(" "),e.requestCount>0?s("div",{staticClass:"cache-info"},[s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[e._v("请求次数:")]),e._v(" "),s("el-tag",{attrs:{size:"small"}},[e._v(e._s(e.requestCount))])],1),e._v(" "),s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[e._v("缓存命中:")]),e._v(" "),s("el-tag",{attrs:{size:"small",type:"success"}},[e._v(e._s(e.cacheHitCount))])],1)]):e._e()],1),e._v(" "),e.responseData?s("div",{staticClass:"response-data"},[s("div",{staticClass:"response-header"},[s("span",[e._v("响应数据:")]),e._v(" "),s("el-tag",{attrs:{size:"small",type:e.responseData.__CACHE_HIT__?"warning":"success"}},[e._v("\n        "+e._s(e.responseData.__CACHE_HIT__?"来自缓存":"来自服务器")+"\n      ")]),e._v(" "),e.responseData.__CACHE_HIT__?s("span",{staticClass:"cache-time"},[e._v("\n        缓存时间: "+e._s(e.formatTime(e.responseData.__timestamp))+"\n      ")]):e._e()],1),e._v(" "),s("div",{staticClass:"response-content"},[s("pre",[e._v(e._s(JSON.stringify(e.responseData.data,null,2)))])])]):e._e()])}),[],!1,null,"31100d08",null);s.default=i.exports}}]);