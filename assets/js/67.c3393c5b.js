(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{566:function(t,s,l){},630:function(t,s,l){"use strict";l(566)},688:function(t,s,l){"use strict";l.r(s);var i={data:()=>({polling:!1,stopPolling:null,pollingData:[],pollCount:0,interval:3e3,stopOnError:!0,maxItems:5}),methods:{startPolling(){this.polling=!0,this.pollCount=0,this.pollingData=[],this.stopPolling=this.$request.poll({url:"/api/status"},{interval:this.interval,immediate:!0,stopOnError:this.stopOnError,maxRetries:0,onSuccess:t=>{this.pollCount++,this.pollingData.unshift({status:t.data.status,timestamp:t.data.timestamp}),this.pollingData.length>this.maxItems&&this.pollingData.pop()},onError:t=>{this.$message.error("轮询请求失败"),console.error("轮询失败:",t),this.stopOnError&&(this.polling=!1)}})},handleStopPolling(){this.stopPolling&&(this.stopPolling(),this.polling=!1,this.$message.info("轮询已停止"))},formatTime(t){if(!t)return"";return new Date(t).toLocaleTimeString()}},beforeDestroy(){var t;null===(t=this.stopPolling)||void 0===t||t.call(this)}},a=(l(630),l(3)),n=Object(a.a)(i,(function(){var t=this,s=t._self._c;return s("div",{staticClass:"example-request-polling"},[s("div",{staticClass:"button-group"},[s("el-button",{attrs:{type:"primary",disabled:t.polling},on:{click:t.startPolling}},[t._v("\n      开始轮询\n    ")]),t._v(" "),s("el-button",{attrs:{type:"danger",disabled:!t.polling},on:{click:t.handleStopPolling}},[t._v("\n      停止轮询\n    ")])],1),t._v(" "),s("div",{staticClass:"config-panel"},[s("div",{staticClass:"config-item"},[s("span",{staticClass:"label"},[t._v("轮询间隔:")]),t._v(" "),s("el-input-number",{attrs:{min:1e3,step:1e3,disabled:t.polling,size:"small"},model:{value:t.interval,callback:function(s){t.interval=s},expression:"interval"}}),t._v(" "),s("span",{staticClass:"unit"},[t._v("ms")])],1),t._v(" "),s("div",{staticClass:"config-item"},[s("el-checkbox",{attrs:{disabled:t.polling},model:{value:t.stopOnError,callback:function(s){t.stopOnError=s},expression:"stopOnError"}},[t._v("\n        出错时停止\n      ")])],1)]),t._v(" "),t.pollingData.length?s("div",{staticClass:"polling-info"},[s("div",{staticClass:"info-header"},[s("span",[t._v("轮询数据:")]),t._v(" "),s("el-tag",{attrs:{size:"small",type:"success"}},[t._v("\n        已轮询 "+t._s(t.pollCount)+" 次\n      ")])],1),t._v(" "),s("div",{staticClass:"data-list"},t._l(t.pollingData,(function(l,i){return s("div",{key:i,staticClass:"data-item"},[s("div",{staticClass:"data-time"},[t._v(t._s(t.formatTime(l.timestamp)))]),t._v(" "),s("div",{staticClass:"data-content"},[t._v(t._s(l.status))])])})),0)]):t._e()])}),[],!1,null,"2877b4af",null);s.default=n.exports}}]);